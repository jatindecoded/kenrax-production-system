(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,95018,e=>{"use strict";function t(e){let t=[];return e.part_number&&0!==e.part_number.trim().length?e.part_number.trim().length<2&&t.push({field:"part_number",message:"Part number must be at least 2 characters"}):t.push({field:"part_number",message:"Part number is required"}),e.product_type?["AIR_FILTER","OIL_FILTER","AIR_OIL_SEPARATOR"].includes(e.product_type)||t.push({field:"product_type",message:"Product type must be AIR_FILTER, OIL_FILTER, or AIR_OIL_SEPARATOR"}):t.push({field:"product_type",message:"Product type is required"}),e.description&&e.description.trim().length>500&&t.push({field:"description",message:"Description must be 500 characters or less"}),{isValid:0===t.length,errors:t}}function r(e){let t=[];if(e.product_id||t.push({field:"product_id",message:"Please select a product"}),e.quantity){let r="string"==typeof e.quantity?parseInt(e.quantity,10):e.quantity;(isNaN(r)||r<=0)&&t.push({field:"quantity",message:"Quantity must be a positive number"})}else t.push({field:"quantity",message:"Quantity is required"});return e.remarks&&e.remarks.trim().length>500&&t.push({field:"remarks",message:"Remarks must be 500 characters or less"}),{isValid:0===t.length,errors:t}}e.s(["validateBatch",()=>r,"validateProduct",()=>t])},15344,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(18566),a=e.i(95018);function i(){let e=(0,s.useRouter)(),i=(0,s.useSearchParams)(),[l,n]=(0,r.useState)(!1),[d,o]=(0,r.useState)(null),[c,u]=(0,r.useState)(!1),[p,m]=(0,r.useState)({part_number:"",product_type:"",description:""}),[b,x]=(0,r.useState)([]);(0,r.useEffect)(()=>{let e=i.get("part_number");e&&m(t=>({...t,part_number:e.toUpperCase()}))},[i]);let h=e=>{let{name:t,value:r}=e.target,s="part_number"===t?r.toUpperCase():r;m(e=>({...e,[t]:s}))},f=async t=>{t.preventDefault();let r=(0,a.validateProduct)(p);if(!r.isValid)return void x(r.errors);n(!0),o(null),x([]);try{let t=await fetch("/api/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)}),r=await t.json();if(!t.ok)return void o(r.error||"Failed to create product");u(!0),m({part_number:"",product_type:"",description:""}),setTimeout(()=>{e.push("/batches/add")},2e3)}catch(e){o("An unexpected error occurred"),console.error(e)}finally{n(!1)}};return(0,t.jsx)("div",{className:"bg-white flex flex-col items-center p-4",style:{fontFamily:"var(--font-geist-sans)"},children:(0,t.jsxs)("div",{className:"w-full max-w-md",children:[(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsx)("h1",{className:"text-2xl font-semibold text-black tracking-tight",children:"New Product"})}),d&&(0,t.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded text-red-700 text-sm font-medium",children:d}),c&&(0,t.jsx)("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded text-green-700 text-sm font-medium",children:"âœ“ Product created. Redirecting..."}),(0,t.jsxs)("form",{onSubmit:f,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"part_number",className:"block text-xs font-semibold text-slate-900 uppercase tracking-wide mb-2",children:"Part Number"}),(0,t.jsx)("input",{id:"part_number",name:"part_number",type:"text",enterKeyHint:"done",value:p.part_number,onChange:h,onKeyDown:e=>{"Enter"===e.key&&e.currentTarget.blur()},placeholder:"e.g., AB123",autoComplete:"off",className:`w-full px-3 py-2 border rounded text-base bg-white text-black placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent transition-all uppercase font-mono tracking-widest ${b.some(e=>"part_number"===e.field)?"border-red-300 bg-red-50":"border-slate-300"}`,style:{fontFamily:"var(--font-jetbrains-mono)"}}),b.some(e=>"part_number"===e.field)&&(0,t.jsx)("p",{className:"text-xs text-red-600 mt-1",children:b.find(e=>"part_number"===e.field)?.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-xs font-semibold text-slate-900 uppercase tracking-wide mb-3",children:["Type ",(0,t.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,t.jsx)("div",{className:"flex gap-2 flex-wrap",children:[{value:"AIR_FILTER",label:"Air Filter"},{value:"OIL_FILTER",label:"Oil Filter"},{value:"AIR_OIL_SEPARATOR",label:"Air Oil Separator"}].map(e=>(0,t.jsxs)("label",{className:`px-4 py-2 border rounded-full cursor-pointer text-sm font-medium transition-all ${p.product_type===e.value?"bg-black text-white border-black":"bg-white text-black border-slate-300 hover:border-slate-500 hover:bg-slate-50"}`,children:[(0,t.jsx)("input",{type:"radio",name:"product_type",value:e.value,checked:p.product_type===e.value,onChange:e=>{var t;return t=e.target.value,void m(e=>({...e,product_type:t}))},className:"hidden"}),(0,t.jsx)("span",{children:e.label})]},e.value))}),b.some(e=>"product_type"===e.field)&&(0,t.jsx)("p",{className:"text-xs text-red-600 mt-1",children:b.find(e=>"product_type"===e.field)?.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"description",className:"block text-xs font-semibold text-slate-900 uppercase tracking-wide mb-2",children:["Description ",(0,t.jsx)("span",{className:"font-normal text-slate-500",children:"(Optional)"})]}),(0,t.jsx)("textarea",{id:"description",name:"description",enterKeyHint:"done",value:p.description,onChange:h,placeholder:"Details...",rows:3,className:`w-full px-3 py-2 border rounded text-base bg-white text-black placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent transition-all resize-none ${b.some(e=>"description"===e.field)?"border-red-300 bg-red-50":"border-slate-300"}`}),b.some(e=>"description"===e.field)&&(0,t.jsx)("p",{className:"text-xs text-red-600 mt-1",children:b.find(e=>"description"===e.field)?.message})]}),(0,t.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,t.jsx)("button",{type:"submit",disabled:l,className:"flex-1 px-4 py-3 bg-black text-white font-semibold rounded hover:bg-slate-900 disabled:bg-slate-400 disabled:cursor-not-allowed transition-colors text-sm tracking-wide uppercase",children:l?"Creating...":"Create"}),(0,t.jsx)("button",{type:"button",onClick:()=>e.back(),className:"flex-1 px-4 py-3 bg-slate-200 text-slate-900 font-semibold rounded hover:bg-slate-300 transition-colors text-sm tracking-wide uppercase",children:"Cancel"})]})]})]})})}function l(){return(0,t.jsx)(r.Suspense,{fallback:(0,t.jsx)("div",{className:"bg-white flex items-center justify-center p-4 min-h-screen",children:"Loading..."}),children:(0,t.jsx)(i,{})})}e.s(["default",()=>l],15344)}]);